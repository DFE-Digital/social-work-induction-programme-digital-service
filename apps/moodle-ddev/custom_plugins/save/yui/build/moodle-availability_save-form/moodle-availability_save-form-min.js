YUI.add("moodle-availability_save-form",function(l,a){M.availability_save=M.availability_save||{},M.availability_save.form=l.Object(M.core_availability.plugin),M.availability_save.form.initInner=function(a){this.databases=(a=a||{}).databases||[],this.targetcmid=a.targetcmid||0},M.availability_save.form.getNode=function(a){var e,i,t;return a=a||{},i=M.util&&M.util.get_string?M.util.get_string("label_selectactivity","availability_save"):"Entry saved for database",e=['<option value="">--</option>'],Array.isArray(this.databases)&&this.databases.length&&this.databases.forEach(function(a){var i;a&&"undefined"!=typeof a.cmid&&(i="string"==typeof a.name&&a.name.length?a.name:"Database "+a.cmid,e.push('<option value="'+a.cmid+'">'+l.Escape.html(i)+"</option>"))}),i='<span class="form-inline availability-save"><label>'+i+'</label> <select class="save-cmid">'+e.join("")+"</select></span>",t=(i=l.Node.create(i)).one(".save-cmid"),a.cmid&&t&&t.set("value",String(a.cmid)),t&&t.on("change",function(){M.core_availability.form.update()}),i},M.availability_save.form.fillValue=function(a,i){i=i&&i.one?i.one(".save-cmid"):null,i=i?parseInt(i.get("value")||0,10):0;!i||this.targetcmid&&i===this.targetcmid?a=null:(a.type="save",a.cmid=i)},M.availability_save.form.fillErrors=function(a,i){i=i&&i.one?i.one(".save-cmid"):null,i=i?parseInt(i.get("value")||0,10):0;i||a.push("availability_save:error_noactivity"),this.targetcmid&&i&&i===this.targetcmid&&a.push("availability_save:error_sameactivity")}},"@VERSION@",{requires:["base","node","event","escape","moodle-core_availability-form"]});